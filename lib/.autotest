require 'snarl'

module AutoSnarl
  def self.img(name)
    File.join(File.dirname(__FILE__), name)
  end

  Autotest.add_hook :run do  |at|
    Snarl.show_message("autotest", "we are safe now", img('smile.png'))
  end

  Autotest.add_hook :red do |at|
    Snarl.show_message("Tests Failed", "#{at.files_to_test.size} tests failed", img('sad.png'))
  end

  Autotest.add_hook :green do |at|
    Snarl.show_message("Tests Passed", "All tests passed", img('smile.png'))
  end

  Autotest.add_hook :interrupt do |at|
    Snarl.show_message("autotest", "autotest was reset")
  end

  Autotest.add_hook :quit do |at|
    Snarl.show_message("autotest", "autotest is exiting")
  end

  Autotest.add_hook :all_good do |at|
    Snarl.show_message("autotest", "Tests have fully passed", img('smile.png'))
  end
end

